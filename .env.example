# DATABASE (MongoDB)
# Local Docker Compose (par défaut) utilise Mongo SANS auth pour que `docker compose up` fonctionne sans secrets.
# Si vous activez l'auth Mongo en prod, fournissez un MONGO_URI complet via variables d'environnement.
MONGO_URI=mongodb://db:27017/supfile

# MongoDB pool tuning (optionnel)
# MONGO_MAX_POOL_SIZE=20
# MONGO_MIN_POOL_SIZE=0

# JWT
# En local/dev : peut être laissé vide (le backend génère automatiquement des secrets au runtime).
# En production : DOIT être défini (>= 32 caractères) via secrets/CI.
JWT_SECRET=
JWT_REFRESH_SECRET=
SESSION_SECRET=

# SERVER
NODE_ENV=development
SERVER_PORT=5000
SERVER_HOST=0.0.0.0
API_URL=http://localhost:5000

# Hardening / performance (optionnel)
# Limite body JSON (les uploads fichiers utilisent multer/chunks, pas JSON)
# JSON_BODY_LIMIT=50mb
# Timeout applicatif (hors streaming: download/stream/preview)
# REQUEST_TIMEOUT_MS=120000
# Timeouts serveur HTTP (best-effort)
# KEEP_ALIVE_TIMEOUT_MS=65000
# HEADERS_TIMEOUT_MS=66000
# SERVER_REQUEST_TIMEOUT_MS=0

# FRONTEND
# En Docker Compose, le frontend appelle l'API via /api (reverse proxy nginx).
# Pour un dev hors Docker, vous pouvez définir VITE_API_URL=http://localhost:5000
VITE_API_URL=

# OAUTH (optional - configure if implementing OAuth)
# GOOGLE_CLIENT_ID=
# GOOGLE_CLIENT_SECRET=
# GITHUB_CLIENT_ID=
# GITHUB_CLIENT_SECRET=

# FILE UPLOAD
MAX_FILE_SIZE=5368709120
UPLOAD_DIR=/usr/src/app/uploads

# CORS
# Optionnel. En Docker Compose, le frontend appelle l'API en same-origin (/api), donc CORS n'est pas requis.
CORS_ORIGIN=

# Rate limit général (éviter 429 en usage pro : dashboard, dossiers, preview, etc.)
# Par défaut : 2000 requêtes / 15 min par IP. Augmenter si 429 en prod (ex. IP partagée, multi-onglets).
# RATE_LIMIT_MAX=2000
# RATE_LIMIT_WINDOW_MS=900000
# Rate limit auth (éviter 429 sur login en prod / IP partagée)
# AUTH_RATE_LIMIT_MAX=30
# AUTH_RATE_LIMIT_WINDOW_MS=900000
#
# Rate limit chunks upload (upload chunké)
# CHUNK_UPLOAD_MAX=5000
# CHUNK_UPLOAD_WINDOW_MS=3600000

# ZIP download protection (optionnel, par VM)
# ZIP_CONCURRENCY_MAX=2
# ZIP_RETRY_AFTER_SEC=10

# EMAIL (pour réinitialisation de mot de passe)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=votre_email@gmail.com
# SMTP_PASS=votre_mot_de_passe_application
# SMTP_FROM=noreply@supfile.com

# FRONTEND URL (pour les liens de réinitialisation)
FRONTEND_URL=http://localhost:3000
